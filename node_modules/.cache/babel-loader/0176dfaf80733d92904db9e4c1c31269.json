{"ast":null,"code":"import _regeneratorRuntime from\"/Users/hiltonluu/Documents/GitHub/ReactRestaurantMenu/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/hiltonluu/Documents/GitHub/ReactRestaurantMenu/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/hiltonluu/Documents/GitHub/ReactRestaurantMenu/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import Papa from'papaparse';import{useCSVReader}from'react-papaparse';import{FoodCategories}from'../Categories/Foodcategories';import'./Foodanddrinks.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var filterAllergies=function filterAllergies(menu,allergies){var filtered=menu.data;allergies.forEach(function(allergy){filtered=filtered.filter(function(food){return food.allergies.includes(allergy.value)===false;});});return filtered;};var regularLayout=function regularLayout(menu,set,type,allergies){return/*#__PURE__*/_jsx(\"ul\",{className:\"foodDisplay\",children:filterAllergies(menu,allergies).filter(function(food3){return food3.subcategory===type;}).map(function(food4){return/*#__PURE__*/_jsxs(\"li\",{className:\"foodItem\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"foodName\",children:[food4.name,\" \",/*#__PURE__*/_jsx(\"span\",{className:\"price\",children:food4.price})]}),/*#__PURE__*/_jsx(\"p\",{children:food4.descr})]},food4.index);})});};var sushiSashimiLayout=function sushiSashimiLayout(menu,type){return/*#__PURE__*/_jsxs(\"table\",{children:[type==='Nigiri/Sashimi'?/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{}),/*#__PURE__*/_jsx(\"td\",{children:\"Sushi 2pc\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Sashimi 3pc\"})]}):/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{}),/*#__PURE__*/_jsx(\"td\",{children:\"10pc\"}),/*#__PURE__*/_jsx(\"td\",{children:\"16pc\"})]}),menu.data.filter(function(food3){return food3.subcategory===type;}).map(function(food4){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:food4.name}),/*#__PURE__*/_jsx(\"td\",{children:food4.price}),/*#__PURE__*/_jsx(\"td\",{children:food4.price2})]},food4.index);})]});};var Foodanddrinks=function Foodanddrinks(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),fullMenu=_useState2[0],setFullMenu=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),text=_useState4[0],setText=_useState4[1];var result={};var subCat=\"\";var load=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var test;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('./fooddrinkdata.csv').then(function(res){return res.text();});case 2:result=_context.sent;_context.next=5;return Papa.parse(result,{header:true});case 5:test=_context.sent;setText(test);setFullMenu(test);case 8:case\"end\":return _context.stop();}}},_callee);}));return function load(){return _ref.apply(this,arguments);};}();useEffect(function(){load();subCat=\"\";},[]);return text&&/*#__PURE__*/_jsx(React.Fragment,{children:FoodCategories.filter(function(food1){return food1.value===props.currentCategory.value;})[0].subcategories.map(function(food2){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"subCat\",children:food2}),food2==='Nigiri/Sashimi'||food2==='Chefs Choice'?sushiSashimiLayout(fullMenu,food2):regularLayout(fullMenu,setFullMenu,food2,props.allergies)]});})});};export default Foodanddrinks;","map":{"version":3,"names":["React","useState","useEffect","Papa","useCSVReader","FoodCategories","filterAllergies","menu","allergies","filtered","data","forEach","allergy","filter","food","includes","value","regularLayout","set","type","food3","subcategory","map","food4","name","price","descr","index","sushiSashimiLayout","price2","Foodanddrinks","props","fullMenu","setFullMenu","text","setText","result","subCat","load","fetch","then","res","parse","header","test","food1","currentCategory","subcategories","food2"],"sources":["/Users/hiltonluu/Documents/GitHub/ReactRestaurantMenu/src/components/Foodanddrinks/Foodanddrinks.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Papa from 'papaparse';\nimport {useCSVReader} from 'react-papaparse';\nimport { FoodCategories } from '../Categories/Foodcategories';\nimport './Foodanddrinks.css';\n\nconst filterAllergies = (menu, allergies) => {\n    let filtered = menu.data;\n\n    allergies.forEach(allergy => {\n        filtered = filtered.filter(food => food.allergies.includes(allergy.value) === false);\n    })\n\n    return filtered;\n};\n\n\nconst regularLayout = (menu, set, type, allergies) => {\n\n    return(\n    <ul className='foodDisplay'>\n    {filterAllergies(menu, allergies).filter(food3 => food3.subcategory === type)\n        .map(food4 => { return(\n            <li key={food4.index} className='foodItem'>      \n                        <p className='foodName'>{food4.name} <span className='price'>{food4.price}</span></p>\n                        \n                        <p>{food4.descr}</p>\n            </li>\n    )})}\n    </ul>\n    ) \n};\n\nconst sushiSashimiLayout = (menu, type) => {\n    return(\n    <table>\n    {\n    type === 'Nigiri/Sashimi' ? \n    <tr>\n        <td></td>\n        <td>Sushi 2pc</td>\n        <td>Sashimi 3pc</td>\n    </tr> :\n    <tr>\n        <td></td>\n        <td>10pc</td>\n        <td>16pc</td>\n    </tr> \n    }\n    \n    {menu.data.filter(food3 => food3.subcategory === type)\n        .map(food4 => { return(\n            <tr key={food4.index}>      \n                        <td>{food4.name}</td>\n                        <td>{food4.price}</td>\n                        <td>{food4.price2}</td>\n            </tr>\n    )})}\n    </table>\n    ) \n};\n\n\n\n\n\n \nconst Foodanddrinks = (props) => {\n    const [fullMenu, setFullMenu] = useState(null);\n    const [ text, setText ] = useState(null);\n\n\n    let result = {};\n    let subCat = \"\";\n\n    const load = async () => {\n        result = await fetch('./fooddrinkdata.csv').then(res => res.text());\n        let test = await Papa.parse( result,  {header: true,});\n        setText(test);\n        setFullMenu(test);  \n    };\n\n    useEffect(() => {\n            load();\n            subCat = \"\";\n      }, []);\n\n    return (text && (\n\n        <React.Fragment>\n            {FoodCategories.filter(food1 => food1.value === props.currentCategory.value)[0].subcategories\n            .map(food2 => { return (\n                <React.Fragment>\n                    <h3 className='subCat'>{food2}</h3>\n                    {food2 === 'Nigiri/Sashimi' || food2 === 'Chefs Choice' ? sushiSashimiLayout(fullMenu, food2) : regularLayout(fullMenu, setFullMenu, food2, props.allergies)}  \n                </React.Fragment>\n            )})}\n        </React.Fragment>\n            \n        \n    ));\n    \n\n    \n};\n\nexport default Foodanddrinks;"],"mappings":"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"},"metadata":{},"sourceType":"module"}